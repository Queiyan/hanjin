<!DOCTYPE html>
<html lang='ko'>
<head>
    <meta charset='UTF-8'>
    <title>우편번호 검색</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
        }

        #wrap {
            width: 100%;
            height: 100%;
        }
    </style>
</head>
<body>
    <div id='wrap'></div>
    <script src='https://t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js'></script>
    <script>// 전역 오류 핸들러 추가
        window.addEventListener('error', function(event) {
            window.chrome.webview.postMessage(JSON.stringify({
                type: 'error',
                message: event.message,
                filename: event.filename,
                lineno: event.lineno,
                colno: event.colno,
                stack: event.error ? event.error.stack : ''
            }));
        });

        window.addEventListener('unhandledrejection', function(event) {
            window.chrome.webview.postMessage(JSON.stringify({
                type: 'unhandledrejection',
                reason: event.reason ? event.reason.stack || event.reason : ''
            }));
        });

        var element_wrap = document.getElementById('wrap');
        function execDaumPostcode() {
            new daum.Postcode({
                oncomplete: function(data) {
                    console.log('선택된 주소 데이터:', data); // 로그 추가
                    window.chrome.webview.postMessage(JSON.stringify({
                        type: 'address',
                        zonecode: data.zonecode,
                        address: data.address
                    }));
                },
                width: '100%',
                height: '100%'
            }).embed(element_wrap);
        }
        execDaumPostcode();</script>
</body>
</html>
